<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CONFIDENTIAL | HAROLD FINCH</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .fading {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #locationMarker {
            transition: all 0.5s ease;
        }
    </style>
</head>
<body class="profile-root">
    <div class="bg-base"></div>
    <div class="bg-circuit"></div>
    <div class="system-status">
        <div class="status-left">
            <span class="back-btn" onclick="window.location.href='index.html'">BACK TO MONITOR</span>
            <i class="fas fa-server"></i> THE MACHINE v4.8.2
            <span><i class="fas fa-network-wired"></i> NODES: 2,147,483</span>
            <span><i class="fas fa-microchip"></i> LOAD: 78%</span>
        </div>
        <div class="status-right">
            <span><i class="fas fa-database"></i> PROCESS: 4.2TB/s</span>
            <span class="time"></span>
        </div>
    </div>

    <!-- Finch专属图书馆侧边栏 -->
    <div class="nypd-sidebar" id="nypdSidebar">
        <div class="sidebar-title">PUBLIC LIBRARY (FINCH'S HIDE/OUT)</p>[THE MACHINE'S CORE OPERATIONS]</div>
        <div class="nypd-section">
            <h4>LIBRARY STATUS (FINCH'S CONTROL)</h4>
            <p>OCCUPANCY: SOLO (RESTRICTED ACCESS) | SURVEILLANCE: JAMMED (TM COVERAGE)</p>
            <p>BACKUP POWER: 100% (72hrs runtime) | NETWORK: ENCRYPTED (TM ONLY)</p>
            <p>SECURITY: 12 LAYERS (PHYSICAL + DIGITAL) | ACCESS: BIOMETRIC (FINCH ONLY)</p>
            <p>EQUIPMENT: 4 SERVER RACKS (TM RELAY) | MONITORS: 18 (REAL-TIME TM FEEDS)</p>
        </div>
        <div class="nypd-section">
            <h4>FINCH'S ACTIVE ANALYSIS</h4>
            <p>ANALYSIS#001: HR UNIT NETWORK (MAP) | STATUS: DECODING (78% COMPLETE)</p>
            <p>ANALYSIS#002: TARGET IDENTIFICATION (TM FEEDS) | STATUS: ACTIVE (12 TARGETS)</p>
            <p>ANALYSIS#003: REESE'S COVER ID (NYPD) | STATUS: MAINTAINED (NO FLAGS)</p>
            <p>ANALYSIS#004: ROOT'S HACK ACTIVITY | STATUS: MONITORED (TM AUTHORIZED)</p>
        </div>
        <div class="nypd-section">
            <h4>FINCH'S RESOURCES (TM ACCESS)</h4>
            <p>DATA STORAGE: 18PB (TM ENCRYPTED) | PROCESSING: QUANTUM LEVEL (TM CORE)</p>
            <p>COMMUNICATIONS: BURNER PHONES (12) | ENCRYPTION: UNBREAKABLE (TM ALGORITHM)</p>
            <p>VEHICLES: 3 (UNREGISTERED) | SAFE HOUSES: 7 (MANHATTAN ONLY)</p>
            <p>FINANCIAL: OFFSHORE ACCOUNTS (UNTRACEABLE) | FUNDS: $47.8M (TM OPERATIONS)</p>
        </div>
    </div>

    <div class="profile-container">
        <div class="profile-card">
            <div class="profile-title">
                <h1>HAROLD FINCH</h1>
                <p>IDENTITY: TGT-001-98754 | RISK LEVEL: HIGH | LAST SEEN: NEW YORK PUBLIC LIBRARY</p>
            </div>

            <div class="profile-top-wrapper">
                <div class="profile-basic">
                    <div class="photo-box">
                        <img src="img/finch.jpg" alt="Harold Finch">
                    </div>
                    <div class="safety-level">
                        <p class="level-text">SAFETY LEVEL</p>
                        <p class="level-value">HIGH</p>
                    </div>
                    <div class="basic-info">
                        <p><strong>Full Name:</strong> Harold Harold Finch (Alias: Harold Wren)</p>
                        <p><strong>DOB:</strong> 1961-09-07</p>
                        <p><strong>Address:</strong> New York Public Library (Cover), Unlisted Safe Houses</p>
                        <p><strong>Occupation:</strong> Technologist / Strategist (The Machine Creator)</p>
                        <p><strong>Affiliation:</strong> The Machine (Creator) | Unofficial Vigilante Network</p>
                        <p><strong>Contact:</strong> Encrypted Burner (Untraceable)</p>
                    </div>
                </div>

                <div class="profile-right-wrapper">
                    <div class="profile-logs-column">
                        <div class="log-scroll">
                            <h3>SYSTEM LOGS</h3>
                            <div class="log-content">
                                <p><span class="log-time">06:00:15</span> - Library access: Biometric scan verified (solo entry)</p>
                                <p><span class="log-time">06:15:42</span> - TM boot sequence: Core systems online (78% load)</p>
                                <p><span class="log-time">07:00:08</span> - Decrypted HR communications: 12th Precinct corruption leads</p>
                                <p><span class="log-time">07:30:29</span> - Comm with Reese: Encrypted text (Times Sq target alert)</p>
                                <p><span class="log-time">08:10:55</span> - Library surveillance jam: Active (NYPD cameras disabled)</p>
                                <p><span class="log-time">09:05:11</span> - TM target analysis: 12 new numbers identified (7 high risk)</p>
                                <p><span class="log-time">09:45:37</span> - Root's hack activity: Monitored (TM authorized access)</p>
                                <p><span class="log-time">10:15:09</span> - Financial op: Transferred funds (Reese's cover ID maintenance)</p>
                                <p><span class="log-time">11:00:24</span> - HR network mapping: 78% complete (3 corrupt captains identified)</p>
                                <p><span class="log-time">12:20:44</span> - Library break: Tea preparation (encrypted comms active)</p>
                                <p><span class="log-time">13:10:19</span> - Shaw's mission: Debrief (ISIA file redaction)</p>
                                <p><span class="log-time">14:05:33</span> - TM maintenance: Minor patch (HR detection algorithm)</p>
                                <p><span class="log-time">15:30:02</span> - Carter comm: Encrypted call (12th Precinct intel)</p>
                                <p><span class="log-time">16:15:47</span> - Library security check: 12 layers verified (no breaches)</p>
                                <p><span class="log-time">17:00:11</span> - HR data backup: Offsite (encrypted, TM only)</p>
                                <p><span class="log-time">18:25:28</span> - Reese extraction: Coordinated (7th Ave target rescue)</p>
                                <p><span class="log-time">19:10:08</span> - TM feed review: 4hrs of surveillance (HR movement tracking)</p>
                                <p><span class="log-time">20:30:55</span> - Library exit: Disguised (elderly walker cover)</p>
                                <p><span class="log-time">21:15:24</span> - Safe house access: Unlisted address (TM core backup)</p>
                                <p><span class="log-time">22:00:42</span> - HR decryption: Final 22% (captain's identity revealed)</p>
                                <p><span class="log-time">23:30:17</span> - TM shutdown: Partial (low power mode, surveillance active)</p>
                            </div>
                        </div>
                    </div>

                    <div class="profile-map-case-column">
                        <div class="map-box" id="interactiveMap">
                            <img src="img/ny-map.png" alt="Public Library Map">
                            <div class="map-controls">
                                <button onclick="updateMapAndCase('public-library')">PUBLIC LIBRARY</button>
                                <button onclick="updateMapAndCase('times-square')">TIMES SQ</button>
                                <button onclick="updateMapAndCase('hr-hq')">HR HQ</button>
                                <button onclick="updateMapAndCase('random')">RANDOM SAFE HOUSE</button>
                            </div>
                            <div class="location-marker" id="locationMarker">
                                <div class="location-text" id="locationText">PUBLIC LIBRARY</div>
                            </div>
                        </div>

                        <div class="case-info" id="activeCase">
                            <h3>ACTIVE CASE: 001-001</h3>
                            <p class="case-item"><strong>Case Type:</strong> HR Unit Network Decryption (TM Priority)</p>
                            <p class="case-item"><strong>Target Area:</strong> New York Public Library, 5th Ave & 42nd St</p>
                            <p class="case-item"><strong>Evidence:</strong> Encrypted HR Communications (TM Decoded 78%)</p>
                            <p class="case-item"><strong>Status:</strong> Active (Reese/Shaw Support Deployed)</p>
                            <p class="case-item"><strong>Update:</strong> 22:00:00 - Final HR captain identity revealed (TM Confirmation)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="news-ticker">
        <div class="ticker-wrapper">
            <div class="ticker-content">
                <span class="member-link" onclick="window.location.href='reese.html'">REESE: TIMES SQ, PROTECTING TARGET 01 | </span>
                <span class="member-link" onclick="window.location.href='finch.html'">FINCH: LIBRARY, DECODING HR NETWORK | </span>
                <span>ALERT: HR UNIT DETECTED NEAR LIBRARY | </span>
                <span class="member-link" onclick="window.location.href='root.html'">ROOT: HACKING HR DATABASE - ACCESS GRANTED | </span>
                <span class="member-link" onclick="window.location.href='shaw.html'">SHAW: 7TH AVE, ELIMINATING HR THREAT | </span>
            </div>
            <div class="ticker-content">
                <span class="member-link" onclick="window.location.href='reese.html'">REESE: TIMES SQ, PROTECTING TARGET 01 | </span>
                <span class="member-link" onclick="window.location.href='finch.html'">FINCH: LIBRARY, DECODING HR NETWORK | </span>
                <span>ALERT: HR UNIT DETECTED NEAR LIBRARY | </span>
                <span class="member-link" onclick="window.location.href='root.html'">ROOT: HACKING HR DATABASE - ACCESS GRANTED | </span>
                <span class="member-link" onclick="window.location.href='shaw.html'">SHAW: 7TH AVE, ELIMINATING HR THREAT | </span>
            </div>
        </div>
    </div>

    <script>
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour12: false });
            document.querySelector('.time').textContent = timeStr;
        }
        setInterval(updateTime, 1000);
        updateTime();

        const nypdSidebar = document.getElementById('nypdSidebar');
        nypdSidebar.addEventListener('mouseenter', () => {
            nypdSidebar.style.transform = 'translateX(0)';
        });
        nypdSidebar.addEventListener('mouseleave', () => {
            nypdSidebar.style.transform = 'translateX(-98%)';
        });

        const map = document.getElementById('interactiveMap');
        const marker = document.getElementById('locationMarker');
        const markerText = document.getElementById('locationText');
        const activeCase = document.getElementById('activeCase');

        const caseRandomPools = {
            types: [
                "HR Unit Network Decryption (TM Priority)",
                "Target Identification (TM Feeds)",
                "Reese Cover ID Maintenance",
                "Root Hack Activity Monitoring",
                "Shaw Mission Debrief (ISIA Files)",
                "Carter Intel Verification (12th Precinct)"
            ],
            evidences: [
                "Encrypted HR Communications (TM Decoded)",
                "TM Target Feed (12 New Numbers)",
                "Offshore Financial Records (Untraceable)",
                "Library Surveillance Jam Logs",
                "ISIA Redacted Files (Shaw Mission)",
                "12th Precinct Corruption Leads"
            ],
            statuses: [
                "Active (Reese/Shaw Support Deployed)",
                "Decoding (78% Complete)",
                "Monitored (TM Authorized Access)",
                "Maintained (No Flags)",
                "Verified (HR Captain Identified)",
                "Backup (TM Core Systems)"
            ],
            updates: [
                "Final HR captain identity revealed (TM Confirmation)",
                "12 new targets identified (7 high risk)",
                "Reese extraction coordinated (7th Ave)",
                "Root hack authorized (TM Approval)",
                "Library security verified (12 layers)",
                "Financial op complete (Reese cover)"
            ]
        };

        function generateRandomCaseData(baseCase) {
            const randomType = caseRandomPools.types[Math.floor(Math.random() * caseRandomPools.types.length)];
            const randomEvidence = caseRandomPools.evidences[Math.floor(Math.random() * caseRandomPools.evidences.length)];
            const randomStatus = caseRandomPools.statuses[Math.floor(Math.random() * caseRandomPools.statuses.length)];
            const randomUpdate = caseRandomPools.updates[Math.floor(Math.random() * caseRandomPools.updates.length)];
            const randomCaseId = `001-${Math.floor(Math.random() * 9999)}`;
            const now = new Date();
            const timeStamp = now.toLocaleTimeString('en-US', { hour12: false });

            return {
                id: randomCaseId,
                type: randomType,
                target: baseCase.target,
                evidence: randomEvidence,
                status: randomStatus,
                update: `${timeStamp} - ${randomUpdate}`
            };
        }

        const areaCaseMap = {
            'public-library': {
                location: { top: '40%', left: '55%', text: 'PUBLIC LIBRARY' },
                baseCase: {
                    target: 'New York Public Library, 5th Ave & 42nd St'
                }
            },
            'times-square': {
                location: { top: '35%', left: '70%', text: 'TIMES SQUARE' },
                baseCase: {
                    target: 'Times Square Pedestrian Plaza (Reese OP)'
                }
            },
            'hr-hq': {
                location: { top: '60%', left: '45%', text: 'HR HQ (UNKNOWN)' },
                baseCase: {
                    target: 'Unknown Location (HR Command Center)'
                }
            },
            'random': {
                location: { top: `${Math.floor(Math.random() * 60) + 20}%`, left: `${Math.floor(Math.random() * 60) + 20}%`, text: 'SAFE HOUSE' },
                baseCase: {
                    target: `Unlisted Safe House (${Math.floor(Math.random() * 100)}th St & ${['5th','6th','7th'][Math.floor(Math.random()*3)]} Ave)`
                }
            }
        };

        function getRandomCase() {
            const randomTop = `${Math.floor(Math.random() * 60) + 20}%`;
            const randomLeft = `${Math.floor(Math.random() * 60) + 20}%`;
            return {
                location: { top: randomTop, left: randomLeft, text: `SAFE HOUSE (${randomTop}, ${randomLeft})` },
                case: generateRandomCaseData({
                    target: `Unlisted Safe House (Midtown - ${randomTop}, ${randomLeft})`
                })
            };
        }

        function getAreaByClick(x, y) {
            const mapRect = map.getBoundingClientRect();
            const relativeX = (x - mapRect.left) / mapRect.width * 100;
            const relativeY = (y - mapRect.top) / mapRect.height * 100;

            if (Math.abs(relativeY - 40) <= 5 && Math.abs(relativeX - 55) <= 5) return 'public-library';
            if (Math.abs(relativeY - 35) <= 5 && Math.abs(relativeX - 70) <= 5) return 'times-square';
            if (Math.abs(relativeY - 60) <= 5 && Math.abs(relativeX - 45) <= 5) return 'hr-hq';
            return 'custom';
        }

        function updateMapAndCase(areaKey) {
            let data;
            if (areaKey === 'random') {
                data = getRandomCase();
            } else if (areaCaseMap[areaKey]) {
                const baseData = areaCaseMap[areaKey];
                data = {
                    location: baseData.location,
                    case: generateRandomCaseData(baseData.baseCase)
                };
            } else {
                data = areaKey;
            }

            marker.style.top = data.location.top;
            marker.style.left = data.location.left;
            marker.style.transform = 'translate(-50%, -50%)';
            markerText.textContent = data.location.text;

            activeCase.classList.add('fading');
            setTimeout(() => {
                activeCase.innerHTML = `
                    <h3>ACTIVE CASE: ${data.case.id}</h3>
                    <p class="case-item"><strong>Case Type:</strong> ${data.case.type}</p>
                    <p class="case-item"><strong>Target Area:</strong> ${data.case.target}</p>
                    <p class="case-item"><strong>Evidence:</strong> ${data.case.evidence}</p>
                    <p class="case-item"><strong>Status:</strong> ${data.case.status}</p>
                    <p class="case-item"><strong>Update:</strong> ${data.case.update}</p>
                `;
                activeCase.classList.remove('fading');
            }, 300);
        }

        map.addEventListener('click', (e) => {
            const areaKey = getAreaByClick(e.clientX, e.clientY);
            if (areaKey === 'custom') {
                const customData = getRandomCase();
                updateMapAndCase(customData);
            } else {
                updateMapAndCase(areaKey);
            }
        });

        const presetAreas = ['public-library', 'times-square', 'hr-hq', 'random'];
        function autoUpdateMapAndCase() {
            const randomArea = presetAreas[Math.floor(Math.random() * presetAreas.length)];
            updateMapAndCase(randomArea);
        }
        const autoUpdateTimer = setInterval(autoUpdateMapAndCase, 30000);

        updateMapAndCase('public-library');
    </script>
</body>
</html>