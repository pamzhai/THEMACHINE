<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CONFIDENTIAL | SAMANTHA GROVES</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 仅添加必要的过渡样式，保证更新时的视觉效果 */
        .fading {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #locationMarker {
            transition: all 0.5s ease;
        }
    </style>
</head>
<body class="profile-root">
    <!-- 全局背景 -->
    <div class="bg-base"></div>
    <div class="bg-circuit"></div>
  <!-- 顶部系统状态栏：新增返回主页按钮 + 实时时间 -->
    <div class="system-status">
        <div class="status-left">
            <span class="back-btn" onclick="window.location.href='index.html'">BACK TO MONITOR</span>
            <i class="fas fa-server"></i> THE MACHINE v4.8.2
            <span><i class="fas fa-network-wired"></i> NODES: 2,147,483</span>
            <span><i class="fas fa-microchip"></i> LOAD: 82%</span>
        </div>
        <div class="status-right">
            <span><i class="fas fa-database"></i> PROCESS: 3.7TB/s</span>
            <span class="time"></span>
        </div>
    </div>

 <!-- Fusco专属NYPD侧边栏（12分局） -->
<div class="nypd-sidebar" id="nypdSidebar">
    <div class="sidebar-title">NYPD 12TH PRECINCT</p>[FUSCO'S DUTY STATION]</div>
    <div class="nypd-section">
        <h4>12TH PRECINCT STATUS (FUSCO'S UNIT)</h4>
        <p>FUSCO'S SHIFT: 08:00 - 20:00 | ON DUTY: YES (OVERTIME: 2hrs)</p>
        <p>PARTNER: DETECTIVE CARTER (ACTIVE) | DETECTIVE SIMMS (BACKUP)</p>
        <p>PATROL AREA: MANHATTAN MIDTOWN | BEAT: 12-B (GRIMEY SIDE)</p>
        <p>DESK ASSIGNMENT: VICE & STREET CRIME (LOW PRIORITY, COVER FOR TM)</p>
    </div>
    <div class="nypd-section">
        <h4>FUSCO'S ACTIVE CASES</h4>
        <p>CASE#1207: DRUG TRAFFICKING (34TH ST) | STATUS: UNDERCOVER (TM RELATED)</p>
        <p>CASE#1208: AUTO THEFT RING (8TH AVE) | STATUS: PENDING (STALLED)</p>
        <p>CASE#1209: ASSAULT (TIMES SQ) | STATUS: RESOLVED (COVER FOR REESE)</p>
        <p>CASE#1210: CORRUPTION (HR UNIT) | STATUS: CLASSIFIED (TM ASSIGNMENT)</p>
    </div>
    <div class="nypd-section">
        <h4>12TH PRECINCT RESOURCES (FUSCO ACCESS)</h4>
        <p>PATROL CARS ASSIGNED: 1 (CAR 12-09, BEAT-UP FORD) | BACKUP: NONE</p>
        <p>FORENSICS TEAM: STANDARD RESPONSE (RESPONSE: 45 MIN)</p>
        <p>CRIME LAB ACCESS: LEVEL 1 (BASIC, NO HOMICIDE CLEARANCE)</p>
        <p>INFORMANT CONTACTS: 8 (STREET LEVEL, TM RELATED SOURCES)</p>
    </div>
</div>

    <!-- 个人页核心容器 -->
  <div class="profile-container">
    <div class="profile-card">
      <!-- 标题区 -->
      <div class="profile-title">
        <h1>DETECTIVE LEONARD FUSCO</h1>
        <p>IDENTITY: TGT-007-89762 | RISK LEVEL: MEDIUM | LAST SEEN: MANHATTAN MIDTOWN</p>
      </div>

      <!-- 上半部分：基础信息 + SYSTEM LOGS + 地图/CASE -->
      <div class="profile-top-wrapper">
        <!-- 基础信息 -->
        <div class="profile-basic">
          <div class="photo-box">
            <img src="img/fusco.jpg" alt="Leonard Fusco"> <!-- 替换为Fusco的图片路径 -->
          </div>
          <div class="safety-level">
            <p class="level-text">SAFETY LEVEL</p>
            <p class="level-value">MEDIUM</p>
          </div>
          <div class="basic-info">
            <p><strong>Full Name:</strong> Leonard "Leo" Fusco</p>
            <p><strong>DOB:</strong> 1970-03-15</p>
            <p><strong>Address:</strong> 789 9th Ave, New York, NY</p>
            <p><strong>Occupation:</strong> NYPD Detective</p>
            <p><strong>Affiliation:</strong> NYPD 12th Precinct | The Machine (Unofficial)</p>
            <p><strong>Contact:</strong> (212) 555-8901</p>
          </div>
        </div>

        <!-- 右侧：SYSTEM LOGS + 地图/ACTIVE CASE 左右 -->
        <div class="profile-right-wrapper">
          <!-- SYSTEM LOGS 列 -->
          <div class="profile-logs-column">
            <div class="log-scroll">
              <h3>SYSTEM LOGS</h3>
              <div class="log-content">
                <p><span class="log-time">07:10:22</span> - Home surveillance: Overslept, rushed morning routine (no breakfast)</p>
                <p><span class="log-time">07:45:18</span> - Exited residential building, late for shift (speeding in personal car)</p>
                <p><span class="log-time">08:15:07</span> - Arrived at 12th Precinct (30min late), signed duty roster (forged time)</p>
                <p><span class="log-time">08:30:44</span> - Grabbed coffee (precinct break room, stale donut)</p>
                <p><span class="log-time">09:05:29</span> - Reviewed low-priority case files (auto theft, cover for TM check-in)</p>
                <p><span class="log-time">09:40:11</span> - Secret comms with Reese: Passed info on HR unit (encrypted text)</p>
                <p><span class="log-time">10:15:37</span> - Left precinct, responded to 911 call (Times Sq - panhandler assault)</p>
                <p><span class="log-time">11:00:08</span> - Accessed NYPD database (12th Precinct terminal) - Cover for TM research</p>
                <p><span class="log-time">11:35:24</span> - Radio: 10-41 (on scene), assault report (cover for Reese pickup)</p>
                <p><span class="log-time">12:10:55</span> - Met with Carter at diner (official) (8th & 34th St) - Discussed HR leads</p>
                <p><span class="log-time">12:55:17</span> - Exited diner, returned to precinct (foot patrol, 34th-42nd St)</p>
                <p><span class="log-time">13:30:42</span> - Radio: Responding to 7th Ave (drug bust call, TM related)</p>
                <p><span class="log-time">14:15:09</span> - FUSCO spotted at 12th Precinct HQ (returned from 7th Ave call)</p>
                <p><span class="log-time">14:50:28</span> - Interviewed informant (7th Ave incident - TM source, off the books)</p>
                <p><span class="log-time">15:25:11</span> - Completed incident report (7th Ave - fake charges, cover for TM)</p>
                <p><span class="log-time">16:00:33</span> - Left precinct, foot patrol (42nd-50th St, Times Sq)</p>
                <p><span class="log-time">16:45:47</span> - Radio: Assisted uniformed officer with crowd control (Times Sq - cover)</p>
                <p><span class="log-time">17:30:19</span> - Returned to precinct, filed patrol notes (fake, TM related redacted)</p>
                <p><span class="log-time">18:15:02</span> - Exited 12th Precinct, began overtime (unofficial TM duty)</p>
                <p><span class="log-time">19:00:44</span> - Met with unknown contact (alley, 9th Ave) - TM info drop</p>
                <p><span class="log-time">20:05:27</span> - Ended scheduled shift (0800-2000), remained on duty (TM assignment)</p>
                <p><span class="log-time">22:00:09</span> - Home surveillance: Ordered takeout, reviewed TM case notes (hidden notebook)</p>
              </div>
            </div>
          </div>

          <!-- 地图+ACTIVE CASE 列 -->
          <div class="profile-map-case-column">
            <!-- 地图（可点击+控制按钮） -->
            <div class="map-box" id="interactiveMap">
              <img src="img/ny-map.png" alt="12th Precinct Map">
              <!-- 地图位置控制按钮 -->
              <div class="map-controls">
                <button onclick="updateMapAndCase('12th-precinct')">12TH PRECINCT</button>
                <button onclick="updateMapAndCase('times-square')">TIMES SQ</button>
                <button onclick="updateMapAndCase('7th-ave')">7TH AVE (DRUG BUST)</button>
                <button onclick="updateMapAndCase('random')">RANDOM LOCATION</button>
              </div>
              <!-- 可动态调整的标记 -->
              <div class="location-marker" id="locationMarker">
                <div class="location-text" id="locationText">12TH PRECINCT</div>
              </div>
            </div>

            <!-- ACTIVE CASE（可动态更新） -->
            <div class="case-info" id="activeCase">
              <h3>ACTIVE CASE: 007-1207</h3>
              <p class="case-item"><strong>Case Type:</strong> Drug Trafficking Investigation (Cover for HR)</p>
              <p class="case-item"><strong>Target Area:</strong> 34th St & 7th Ave, Manhattan Midtown</p>
              <p class="case-item"><strong>Evidence:</strong> Fake Drug Seizure (Cover for TM Intel)</p>
              <p class="case-item"><strong>Status:</strong> Undercover (Assisting The Machine)</p>
              <p class="case-item"><strong>Update:</strong> 14:50:00 - Informant contact made, HR leads obtained</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
   <!-- 底部滚动播报 -->
    <div class="news-ticker">
        <div class="ticker-wrapper">
            <div class="ticker-content">
                <span class="member-link" onclick="window.location.href='reese.html'">REESE: 7TH AVE, MONITORING TARGET 07 | </span>
                <span class="member-link" onclick="window.location.href='finch.html'">FINCH: PUBLIC LIBRARY, ANALYZING HR DATA | </span>
                <span>ALERT: HR UNIT DETECTED NEAR 12TH PRECINCT | </span>
                <span class="member-link" onclick="window.location.href='root.html'">ROOT: HACKING 12TH PRECINCT CAMERAS - ACCESS GRANTED | </span>
                <span class="member-link" onclick="window.location.href='fusco.html'">FUSCO: 12TH PRECINCT, COVERING TM EVIDENCE | </span>
            </div>
            <div class="ticker-content">
                <span class="member-link" onclick="window.location.href='reese.html'">REESE: 7TH AVE, MONITORING TARGET 07 | </span>
                <span class="member-link" onclick="window.location.href='finch.html'">FINCH: PUBLIC LIBRARY, ANALYZING HR DATA | </span>
                <span>ALERT: HR UNIT DETECTED NEAR 12TH PRECINCT | </span>
                <span class="member-link" onclick="window.location.href='root.html'">ROOT: HACKING 12TH PRECINCT CAMERAS - ACCESS GRANTED | </span>
                <span class="member-link" onclick="window.location.href='fusco.html'">FUSCO: 12TH PRECINCT, COVERING TM EVIDENCE | </span>
            </div>
        </div>
    </div>

    <!-- 实时时间 + 地图+案件联动脚本 -->
    <script>
        // 更新实时时间
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour12: false });
            document.querySelector('.time').textContent = timeStr;
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Fusco侧边栏hover交互
        const nypdSidebar = document.getElementById('nypdSidebar');
        nypdSidebar.addEventListener('mouseenter', () => {
            nypdSidebar.style.transform = 'translateX(0)';
        });
        nypdSidebar.addEventListener('mouseleave', () => {
            nypdSidebar.style.transform = 'translateX(-98%)';
        });

        // ========== 地图+案件联动核心逻辑 ==========
        const map = document.getElementById('interactiveMap');
        const marker = document.getElementById('locationMarker');
        const markerText = document.getElementById('locationText');
        const activeCase = document.getElementById('activeCase');

        // 案件类型/状态/证据随机池（用于生成随机CASE信息）
        const caseRandomPools = {
            types: [
                "Drug Trafficking Investigation (Cover for HR)",
                "Assault Investigation (Cover for Reese)",
                "Narcotics Raid (Official Cover)",
                "Auto Theft Ring (TM Related)",
                "Corruption Probe (HR Unit)",
                "Suspicious Activity (TM Generated)"
            ],
            evidences: [
                "Fake Drug Seizure (Cover for TM Intel)",
                "Witness Testimony (Fake, Cover for TM Pickup)",
                "2kg Fake Cocaine (Cover for TM Intel Seizure)",
                "Stolen Vehicle VIN Records (TM Redacted)",
                "Encrypted HR Communications (TM Decrypted)",
                "Unverified Intel (The Machine Alert)"
            ],
            statuses: [
                "Undercover (Assisting The Machine)",
                "Resolved (No Arrest, TM Mission Completed)",
                "Active (Ongoing Undercover Operation)",
                "Pending (STALLED, TM Waiting for Intel)",
                "Classified (TM Assignment Only)",
                "Pending (Fusco Dispatched to Investigate)"
            ],
            updates: [
                "Informant contact made, HR leads obtained",
                "Met with Reese, Passed Stolen Evidence",
                "Coordinated with Uniformed Units for Fake Raid",
                "The Machine Detected Potential Threat",
                "HR Unit activity spotted, monitoring ongoing",
                "Auto theft suspect identified (TM Intel)"
            ]
        };

        // 生成随机CASE信息（基于基础模板）
        function generateRandomCaseData(baseCase) {
            const randomType = caseRandomPools.types[Math.floor(Math.random() * caseRandomPools.types.length)];
            const randomEvidence = caseRandomPools.evidences[Math.floor(Math.random() * caseRandomPools.evidences.length)];
            const randomStatus = caseRandomPools.statuses[Math.floor(Math.random() * caseRandomPools.statuses.length)];
            const randomUpdate = caseRandomPools.updates[Math.floor(Math.random() * caseRandomPools.updates.length)];
            const randomCaseId = `007-${Math.floor(Math.random() * 9999)}`;
            
            // 生成当前时间的更新戳
            const now = new Date();
            const timeStamp = now.toLocaleTimeString('en-US', { hour12: false });

            return {
                id: randomCaseId,
                type: randomType,
                target: baseCase.target, // 保留目标区域不变，仅随机其他信息
                evidence: randomEvidence,
                status: randomStatus,
                update: `${timeStamp} - ${randomUpdate}`
            };
        }

        // 区域-案件基础映射表（可扩展更多区域）
        const areaCaseMap = {
            '12th-precinct': {
                location: { top: '50%', left: '50%', text: '12TH PRECINCT' },
                baseCase: {
                    target: '34th St & 7th Ave, Manhattan Midtown'
                }
            },
            'times-square': {
                location: { top: '35%', left: '70%', text: 'TIMES SQUARE' },
                baseCase: {
                    target: 'Times Square Pedestrian Plaza'
                }
            },
            '7th-ave': {
                location: { top: '65%', left: '40%', text: '7TH AVE (DRUG BUST)' },
                baseCase: {
                    target: '7th Ave & 38th St, Midtown'
                }
            },
            'random': {
                location: { top: `${Math.floor(Math.random() * 60) + 20}%`, left: `${Math.floor(Math.random() * 60) + 20}%`, text: 'UNKNOWN CRIME SCENE' },
                baseCase: {
                    target: `Unknown Location (${Math.floor(Math.random() * 100)}th St & ${['5th','6th','7th','8th','9th'][Math.floor(Math.random()*5)]} Ave)`
                }
            }
        };

        // 生成随机未知区域案件（点击地图空白处用）
        function getRandomCase() {
            const randomTop = `${Math.floor(Math.random() * 60) + 20}%`;
            const randomLeft = `${Math.floor(Math.random() * 60) + 20}%`;
            return {
                location: { top: randomTop, left: randomLeft, text: `UNKNOWN (${randomTop}, ${randomLeft})` },
                case: generateRandomCaseData({
                    target: `Unknown Location (Midtown Patrol Route - ${randomTop}, ${randomLeft})`
                })
            };
        }

        // 判断点击位置所属区域（简单坐标匹配，可扩展精度）
        function getAreaByClick(x, y) {
            const mapRect = map.getBoundingClientRect();
            const relativeX = (x - mapRect.left) / mapRect.width * 100; // 相对X百分比
            const relativeY = (y - mapRect.top) / mapRect.height * 100;  // 相对Y百分比

            // 匹配预设区域（误差±5%）
            if (Math.abs(relativeY - 50) <= 5 && Math.abs(relativeX - 50) <= 5) return '12th-precinct';
            if (Math.abs(relativeY - 35) <= 5 && Math.abs(relativeX - 70) <= 5) return 'times-square';
            if (Math.abs(relativeY - 65) <= 5 && Math.abs(relativeX - 40) <= 5) return '7th-ave';
            return 'custom'; // 自定义点击位置
        }

        // 更新地图标记和案件信息
        function updateMapAndCase(areaKey) {
            let data;
            // 处理预设区域/随机/自定义点击
            if (areaKey === 'random') {
                data = getRandomCase();
            } else if (areaCaseMap[areaKey]) {
                // 基于基础模板生成随机CASE信息
                const baseData = areaCaseMap[areaKey];
                data = {
                    location: baseData.location,
                    case: generateRandomCaseData(baseData.baseCase)
                };
            } else {
                data = areaKey; // 自定义点击位置时直接传入data对象
            }

            // 1. 更新地图标记
            marker.style.top = data.location.top;
            marker.style.left = data.location.left;
            marker.style.transform = 'translate(-50%, -50%)';
            markerText.textContent = data.location.text;

            // 2. 更新案件信息（添加过渡动画）
            activeCase.classList.add('fading');
            setTimeout(() => {
                activeCase.innerHTML = `
                    <h3>ACTIVE CASE: ${data.case.id}</h3>
                    <p class="case-item"><strong>Case Type:</strong> ${data.case.type}</p>
                    <p class="case-item"><strong>Target Area:</strong> ${data.case.target}</p>
                    <p class="case-item"><strong>Evidence:</strong> ${data.case.evidence}</p>
                    <p class="case-item"><strong>Status:</strong> ${data.case.status}</p>
                    <p class="case-item"><strong>Update:</strong> ${data.case.update}</p>
                `;
                activeCase.classList.remove('fading');
            }, 300);
        }

        // 监听地图点击事件
        map.addEventListener('click', (e) => {
            const areaKey = getAreaByClick(e.clientX, e.clientY);
            if (areaKey === 'custom') {
                // 自定义点击位置，生成随机案件
                const customData = getRandomCase();
                updateMapAndCase(customData);
            } else {
                // 匹配预设区域，加载对应随机案件
                updateMapAndCase(areaKey);
            }
        });

        // ========== 新增：自动随机更新功能 ==========
        // 四个预设区域列表
        const presetAreas = ['12th-precinct', 'times-square', '7th-ave', 'random'];
        
        // 自动更新函数：随机选择一个区域更新
        function autoUpdateMapAndCase() {
            // 随机选择一个预设区域
            const randomArea = presetAreas[Math.floor(Math.random() * presetAreas.length)];
            // 更新地图和案件信息
            updateMapAndCase(randomArea);
        }

        // 启动自动更新：每30秒（30000毫秒）执行一次
        // 如需停止自动更新，可执行：clearInterval(autoUpdateTimer)
        const autoUpdateTimer = setInterval(autoUpdateMapAndCase, 30000);

        // 初始加载：12分局+对应随机案件
        updateMapAndCase('12th-precinct');
    </script>
</body>
</html>