<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CONFIDENTIAL | JOHN REESE</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        #logContent {
            height: calc(100% - 30px);
            overflow-y: auto;
            scroll-behavior: auto !important; /* 关闭平滑滚动，避免卡顿 */
            font-family: inherit;
            font-size: inherit;
            color: inherit;
            position: relative;
        }
        .sidebar-random {
            transition: all 0.5s ease;
        }
        .fading {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #locationMarker {
            transition: all 0.5s ease;
        }
        #logContent::-webkit-scrollbar {
            display: none;
        }
        #logContent {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="profile-root">
    <div class="bg-base"></div>
    <div class="bg-circuit"></div>

    <div class="system-status">
        <div class="status-left">
            <span class="back-btn" onclick="window.location.href='index.html'">BACK TO MONITOR</span>
            <i class="fas fa-server"></i> THE MACHINE v4.8.2
            <span><i class="fas fa-network-wired"></i> NODES: 2,147,483</span>
            <span><i class="fas fa-microchip"></i> LOAD: 82%</span>
        </div>
        <div class="status-right">
            <span><i class="fas fa-database"></i> PROCESS: 3.7TB/s</span>
            <span class="time"></span>
        </div>
    </div>

    <div class="nypd-sidebar" id="nypdSidebar">
        <div class="sidebar-title">CIA BLACK OPS (RETIRED)<br>[REESE'S OPERATIONAL ZONE]</div>
        <div class="nypd-section">
            <h4>OPERATIONAL STATUS (REESE'S UNIT)</h4>
            <p>REESE'S SHIFT: 24/7 | ON DUTY: YES (OVERTIME: <span class="sidebar-random" data-min="12" data-max="96">72</span>hrs)</p>
            <p>PARTNER: FINCH (STATUS: <span class="sidebar-random" data-list="ACTIVE,STANDBY,IN COMM">ACTIVE</span>) | DETECTIVE CARTER (INFORMANT)</p>
            <p>PATROL AREA: MANHATTAN (<span class="sidebar-random" data-list="FINANCIAL DISTRICT,MIDTOWN,UPTOWN">ALL BOROS</span>) | BEAT: GHOST (UNDERCOVER)</p>
            <p>DESK ASSIGNMENT: NONE (OFF THE BOOKS, COVER FOR TM)</p>
        </div>
        <div class="nypd-section">
            <h4>REESE'S ACTIVE OPERATIONS</h4>
            <p>OP#707: HR TARGET ELIMINATION (34TH ST) | STATUS: <span class="sidebar-random" data-list="UNDERCOVER,ACTIVE,PENDING">UNDERCOVER</span> (TM RELATED)</p>
            <p>OP#708: SAMARITAN AGENT TRACKING (8TH AVE) | STATUS: PENDING (MONITORING)</p>
            <p>OP#709: WITNESS PROTECTION (TIMES SQ) | STATUS: RESOLVED (COVER FOR TM)</p>
            <p>OP#710: CORRUPTION (HR UNIT) | STATUS: CLASSIFIED (TM ASSIGNMENT)</p>
        </div>
        <div class="nypd-section">
            <h4>OPERATIONAL RESOURCES (REESE ACCESS)</h4>
            <p>VEHICLES ASSIGNED: <span class="sidebar-random" data-min="1" data-max="3">1</span> (STOLEN FORD TAURUS) | BACKUP: NONE (GHOST MODE)</p>
            <p>FORENSICS: SELF-TAUGHT (RESPONSE: INSTANT)</p>
            <p>DATABASE ACCESS: LEVEL 5 (CIA/NSA, TM HACKED)</p>
            <p>INFORMANT CONTACTS: <span class="sidebar-random" data-min="3" data-max="8">5</span> (CRIMINAL UNDERWORLD, TM RELATED)</p>
        </div>
    </div>

    <div class="profile-container">
        <div class="profile-card">
            <div class="profile-title">
                <h1>JOHN REESE</h1>
                <p>IDENTITY: TGT-001-12345 | RISK LEVEL: HIGH | LAST SEEN: MANHATTAN FINANCIAL DISTRICT</p>
            </div>
            <div class="profile-top-wrapper">
                <div class="profile-basic">
                    <div class="photo-box">
                        <img src="img/reese.jpg" alt="John Reese">
                    </div>
                    <div class="safety-level">
                        <p class="level-text">SAFETY LEVEL</p>
                        <p class="level-value">HIGH</p>
                    </div>
                    <div class="basic-info">
                        <p><strong>Full Name:</strong> John Patrick Reese</p>
                        <p><strong>DOB:</strong> 1967-09-17</p>
                        <p><strong>Address:</strong> NONE (Homeless Cover, Nomadic - NYC Safe Houses)</p>
                        <p><strong>Occupation:</strong> Former CIA Black Ops | Vigilante | The Machine's Enforcer</p>
                        <p><strong>Affiliation:</strong> The Machine | Former US Army Special Forces | CIA (Retired)</p>
                        <p><strong>Contact:</strong> (212) 555-1234 (Burner Phone - Rotates Hourly)</p>
                    </div>
                </div>

                <div class="profile-logs-column">
                    <div class="log-scroll">
                        <h3>SYSTEM LOGS</h3>
                        <div class="log-content" id="logContent">
                            <!-- 第一份日志（原内容） -->
                            <div class="log-copy log-copy-1">
                                <p><span class="log-time">07:10:22</span> - Safe house surveillance: Woke early, cleaned pistol (silenced 9mm)</p>
                                <p><span class="log-time">07:45:18</span> - Exited safe house, stole unmarked car (no plates, NYC streets)</p>
                                <p><span class="log-time">08:15:07</span> - Arrived at Financial District (surveillance, HR target)</p>
                                <p><span class="log-time">08:30:44</span> - Grabbed coffee (bodega, 5th & 42nd - scanned for tails)</p>
                                <p><span class="log-time">09:05:29</span> - Reviewed TM intel (HR movement, cover for surveillance)</p>
                                <p><span class="log-time">09:40:11</span> - Secret comms with Finch: Passed info on HR unit (encrypted call)</p>
                                <p><span class="log-time">10:15:37</span> - Left surveillance post, responded to TM alert (Times Sq - witness threat)</p>
                                <p><span class="log-time">11:00:08</span> - Accessed NYPD database (public terminal) - Cover for TM research</p>
                                <p><span class="log-time">11:35:24</span> - Radio: 10-41 (on scene), assault report (cover for witness extraction)</p>
                                <p><span class="log-time">12:10:55</span> - Met with Fusco at diner (official) (8th & 34th St) - Discussed HR leads</p>
                                <p><span class="log-time">12:55:17</span> - Exited diner, foot patrol (34th-42nd St, concealed weapon)</p>
                                <p><span class="log-time">13:30:42</span> - Radio: Responding to 7th Ave (HR meeting, TM related)</p>
                                <p><span class="log-time">14:15:09</span> - REESE spotted at 7th Ave (surveilling HR operatives)</p>
                                <p><span class="log-time">14:50:28</span> - Intercepted HR courier (7th Ave incident - TM source, off the books)</p>
                                <p><span class="log-time">15:25:11</span> - Disposed of evidence (7th Ave - no trace, cover for TM)</p>
                                <p><span class="log-time">16:00:33</span> - Left op zone, foot patrol (42nd-50th St, Times Sq)</p>
                                <p><span class="log-time">16:45:47</span> - Assisted uniformed officer (Times Sq - cover for witness pickup)</p>
                                <p><span class="log-time">17:30:19</span> - Returned to safe house, filed notes (mental, TM related redacted)</p>
                                <p><span class="log-time">18:15:02</span> - Exited safe house, began overtime (unofficial TM duty)</p>
                                <p><span class="log-time">19:00:44</span> - Met with unknown contact (alley, 9th Ave) - TM info drop</p>
                                <p><span class="log-time">20:05:27</span> - Ended scheduled op (0800-2000), remained on duty (TM assignment)</p>
                                <p><span class="log-time">22:00:09</span> - Safe house surveillance: Cleaned weapons, reviewed TM case notes (mental)</p>
                            </div>
                            <!-- 第二份日志（复制一份，实现无缝） -->
                            <div class="log-copy log-copy-2">
                                <p><span class="log-time">07:10:22</span> - Safe house surveillance: Woke early, cleaned pistol (silenced 9mm)</p>
                                <p><span class="log-time">07:45:18</span> - Exited safe house, stole unmarked car (no plates, NYC streets)</p>
                                <p><span class="log-time">08:15:07</span> - Arrived at Financial District (surveillance, HR target)</p>
                                <p><span class="log-time">08:30:44</span> - Grabbed coffee (bodega, 5th & 42nd - scanned for tails)</p>
                                <p><span class="log-time">09:05:29</span> - Reviewed TM intel (HR movement, cover for surveillance)</p>
                                <p><span class="log-time">09:40:11</span> - Secret comms with Finch: Passed info on HR unit (encrypted call)</p>
                                <p><span class="log-time">10:15:37</span> - Left surveillance post, responded to TM alert (Times Sq - witness threat)</p>
                                <p><span class="log-time">11:00:08</span> - Accessed NYPD database (public terminal) - Cover for TM research</p>
                                <p><span class="log-time">11:35:24</span> - Radio: 10-41 (on scene), assault report (cover for witness extraction)</p>
                                <p><span class="log-time">12:10:55</span> - Met with Fusco at diner (official) (8th & 34th St) - Discussed HR leads</p>
                                <p><span class="log-time">12:55:17</span> - Exited diner, foot patrol (34th-42nd St, concealed weapon)</p>
                                <p><span class="log-time">13:30:42</span> - Radio: Responding to 7th Ave (HR meeting, TM related)</p>
                                <p><span class="log-time">14:15:09</span> - REESE spotted at 7th Ave (surveilling HR operatives)</p>
                                <p><span class="log-time">14:50:28</span> - Intercepted HR courier (7th Ave incident - TM source, off the books)</p>
                                <p><span class="log-time">15:25:11</span> - Disposed of evidence (7th Ave - no trace, cover for TM)</p>
                                <p><span class="log-time">16:00:33</span> - Left op zone, foot patrol (42nd-50th St, Times Sq)</p>
                                <p><span class="log-time">16:45:47</span> - Assisted uniformed officer (Times Sq - cover for witness pickup)</p>
                                <p><span class="log-time">17:30:19</span> - Returned to safe house, filed notes (mental, TM related redacted)</p>
                                <p><span class="log-time">18:15:02</span> - Exited safe house, began overtime (unofficial TM duty)</p>
                                <p><span class="log-time">19:00:44</span> - Met with unknown contact (alley, 9th Ave) - TM info drop</p>
                                <p><span class="log-time">20:05:27</span> - Ended scheduled op (0800-2000), remained on duty (TM assignment)</p>
                                <p><span class="log-time">22:00:09</span> - Safe house surveillance: Cleaned weapons, reviewed TM case notes (mental)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="profile-map-case-column">
                    <div class="map-box" id="interactiveMap">
                        <img src="img/ny-map.png" alt="Reese's Operational Map">
                        
                        <div class="location-marker" id="locationMarker">
                            <div class="location-text" id="locationText">FINANCIAL DISTRICT</div>
                        </div>
                    </div>
                    <div class="case-info" id="activeCase">
                        <h3>ACTIVE OP: 001-707</h3>
                        <p class="case-item"><strong>Op Type:</strong> HR Target Elimination (Cover for TM)</p>
                        <p class="case-item"><strong>Target Area:</strong> 34th St & 7th Ave, Manhattan Financial District</p>
                        <p class="case-item"><strong>Evidence:</strong> Stolen HR Intel Drive (Cover for TM Intel)</p>
                        <p class="case-item"><strong>Status:</strong> Undercover (Assisting The Machine)</p>
                        <p class="case-item"><strong>Update:</strong> 14:50:00 - Courier intercepted, HR leads obtained</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="news-ticker">
        <div class="ticker-wrapper">
            <div class="ticker-content">
                <span class="member-link" onclick="window.location.href='reese.html'">REESE: 7TH AVE, MONITORING HR TARGET | </span>
                <span class="member-link" onclick="window.location.href='finch.html'">FINCH: PUBLIC LIBRARY, ANALYZING HR DATA | </span>
                <span>ALERT: HR UNIT DETECTED NEAR FINANCIAL DISTRICT | </span>
                <span class="member-link" onclick="window.location.href='root.html'">ROOT: HACKING NYPD CAMERAS - ACCESS GRANTED | </span>
                <span class="member-link" onclick="window.location.href='fusco.html'">FUSCO: 12TH PRECINCT, COVERING TM EVIDENCE | </span>
            </div>
            <div class="ticker-content">
                <span class="member-link" onclick="window.location.href='reese.html'">REESE: 7TH AVE, MONITORING HR TARGET | </span>
                <span class="member-link" onclick="window.location.href='finch.html'">FINCH: PUBLIC LIBRARY, ANALYZING HR DATA | </span>
                <span>ALERT: HR UNIT DETECTED NEAR FINANCIAL DISTRICT | </span>
                <span class="member-link" onclick="window.location.href='root.html'">ROOT: HACKING NYPD CAMERAS - ACCESS GRANTED | </span>
                <span class="member-link" onclick="window.location.href='fusco.html'">FUSCO: 12TH PRECINCT, COVERING TM EVIDENCE | </span>
            </div>
        </div>
    </div>

    <script>
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour12: false });
            document.querySelector('.time').textContent = timeStr;
        }
        setInterval(updateTime, 1000);
        updateTime();

        const nypdSidebar = document.getElementById('nypdSidebar');
        nypdSidebar.addEventListener('mouseenter', () => {
            nypdSidebar.style.transform = 'translateX(0)';
        });
        nypdSidebar.addEventListener('mouseleave', () => {
            nypdSidebar.style.transform = 'translateX(-98%)';
        });

        const map = document.getElementById('interactiveMap');
        const marker = document.getElementById('locationMarker');
        const markerText = document.getElementById('locationText');
        const activeCase = document.getElementById('activeCase');
        
        const caseRandomPools = {
            types: [
                "HR Target Elimination (Cover for TM)",
                "Witness Protection (Cover for Reese)",
                "Samaritan Agent Surveillance (Official Cover)",
                "HR Courier Interception (TM Related)",
                "Corruption Probe (HR Unit)",
                "Suspicious Activity (TM Generated)"
            ],
            evidences: [
                "Stolen HR Intel Drive (Cover for TM Intel)",
                "Witness Extraction (Fake, Cover for TM Pickup)",
                "Stolen Firearm (Cover for TM Intel Seizure)",
                "HR Communication Logs (TM Redacted)",
                "Encrypted HR Communications (TM Decrypted)",
                "Unverified Intel (The Machine Alert)"
            ],
            statuses: [
                "Undercover (Assisting The Machine)",
                "Resolved (No Arrest, TM Mission Completed)",
                "Active (Ongoing Undercover Operation)",
                "Pending (STALLED, TM Waiting for Intel)",
                "Classified (TM Assignment Only)",
                "Pending (Reese Dispatched to Investigate)"
            ],
            updates: [
                "Courier intercepted, HR leads obtained",
                "Met with Finch, Passed Stolen Evidence",
                "Coordinated with Fusco for Fake Raid",
                "The Machine Detected Potential Threat",
                "HR Unit activity spotted, monitoring ongoing",
                "HR target identified (TM Intel)"
            ]
        };

        function generateRandomCaseData(baseCase) {
            const now = new Date();
            const randomType = caseRandomPools.types[Math.floor(Math.random() * caseRandomPools.types.length)];
            const randomEvidence = caseRandomPools.evidences[Math.floor(Math.random() * caseRandomPools.evidences.length)];
            const randomStatus = caseRandomPools.statuses[Math.floor(Math.random() * caseRandomPools.statuses.length)];
            const randomUpdate = caseRandomPools.updates[Math.floor(Math.random() * caseRandomPools.updates.length)];
            const randomCaseId = `001-${Math.floor(Math.random() * 9999)}`;
            const timeStamp = now.toLocaleTimeString('en-US', { hour12: false });
            
            return {
                id: randomCaseId,
                type: randomType,
                target: baseCase.target,
                evidence: randomEvidence,
                status: randomStatus,
                update: `${timeStamp} - ${randomUpdate}`
            };
        }

        const areaCaseMap = {
            '12th-precinct': {
                location: { top: '50%', left: '50%', text: 'FINANCIAL DISTRICT' },
                baseCase: { target: '34th St & 7th Ave, Manhattan Financial District' }
            },
            'times-square': {
                location: { top: '35%', left: '70%', text: 'TIMES SQUARE' },
                baseCase: { target: 'Times Square Pedestrian Plaza, Manhattan' }
            },
            '7th-ave': {
                location: { top: '65%', left: '40%', text: '7TH AVE (HR MEETING)' },
                baseCase: { target: '7th Ave & 38th St, Manhattan' }
            },
            'random': {
                location: { 
                    top: `${Math.floor(Math.random() * 70) + 15}%`, 
                    left: `${Math.floor(Math.random() * 70) + 15}%`, 
                    text: 'RANDOM OP ZONE' 
                },
                baseCase: { target: `${Math.floor(Math.random() * 100)}th St & ${['5th','6th','7th','8th','9th'][Math.floor(Math.random()*5)]} Ave, Manhattan)` }
            }
        };

        function getRandomCase() {
            const randomTop = `${Math.floor(Math.random() * 70) + 15}%`;
            const randomLeft = `${Math.floor(Math.random() * 70) + 15}%`;
            const nyAddr = `${Math.floor(Math.random() * 100)}th St & ${['5th','6th','7th','8th','9th'][Math.floor(Math.random()*5)]} Ave, Manhattan)`;
            return {
                location: { 
                    top: randomTop, 
                    left: randomLeft, 
                    text: `OP ZONE (${nyAddr.split(',')[0]})` 
                },
                case: generateRandomCaseData({ target: nyAddr })
            };
        }

        function getAreaByClick(x, y) {
            const mapRect = map.getBoundingClientRect();
            const relativeX = (x - mapRect.left) / mapRect.width * 100;
            const relativeY = (y - mapRect.top) / mapRect.height * 100;
            
            if (Math.abs(relativeY - 50) <= 5 && Math.abs(relativeX - 50) <= 5) return '12th-precinct';
            if (Math.abs(relativeY - 35) <= 5 && Math.abs(relativeX - 70) <= 5) return 'times-square';
            if (Math.abs(relativeY - 65) <= 5 && Math.abs(relativeX - 40) <= 5) return '7th-ave';
            return 'custom';
        }

        function updateMapAndCase(areaKey) {
            let data;
            if (areaKey === 'random') {
                data = getRandomCase();
            } else if (areaCaseMap[areaKey]) {
                const baseData = areaCaseMap[areaKey];
                data = {
                    location: baseData.location,
                    case: generateRandomCaseData(baseData.baseCase)
                };
            } else {
                data = areaKey;
            }
            
            marker.style.top = data.location.top;
            marker.style.left = data.location.left;
            markerText.textContent = data.location.text;
            
            activeCase.classList.add('fading');
            setTimeout(() => {
                activeCase.innerHTML = `
                    <h3>ACTIVE OP: ${data.case.id}</h3>
                    <p class="case-item"><strong>Op Type:</strong> ${data.case.type}</p>
                    <p class="case-item"><strong>Target Area:</strong> ${data.case.target}</p>
                    <p class="case-item"><strong>Evidence:</strong> ${data.case.evidence}</p>
                    <p class="case-item"><strong>Status:</strong> ${data.case.status}</p>
                    <p class="case-item"><strong>Update:</strong> ${data.case.update}</p>
                `;
                activeCase.classList.remove('fading');
            }, 300);
        }

        map.addEventListener('click', (e) => {
            const areaKey = getAreaByClick(e.clientX, e.clientY);
            if (areaKey === 'custom') {
                const customData = getRandomCase();
                updateMapAndCase(customData);
            } else {
                updateMapAndCase(areaKey);
            }
        });

        const presetAreas = ['12th-precinct', 'times-square', '7th-ave', 'random'];
        function autoUpdateMapAndCase() {
            const randomArea = presetAreas[Math.floor(Math.random() * presetAreas.length)];
            updateMapAndCase(randomArea);
        }
        const autoUpdateTimer = setInterval(autoUpdateMapAndCase, 30000);
        updateMapAndCase('12th-precinct');

        // ======================== 仅修改日志滚动逻辑（无缝无卡顿） ========================
        let logAnimationId;
        const logContent = document.getElementById('logContent');
        const logCopy1 = document.querySelector('.log-copy-1');
        const scrollSpeed = 0.6; // 极致丝滑的滚动速度
        let logHeight = 0; // 单份日志的高度

        // 初始化：获取单份日志高度
        window.addEventListener('load', () => {
            logHeight = logCopy1.offsetHeight;
            startLogScroll();
        });

        // 核心：无缝滚动（无重置，无卡顿）
        function scrollLogs() {
            // 持续平滑滚动
            logContent.scrollTop += scrollSpeed;
            
            // 当滚动到第二份日志顶部时，瞬间重置到第一份顶部（视觉无感知）
            if (logContent.scrollTop >= logHeight) {
                logContent.scrollTop = 0;
            }
            
            logAnimationId = requestAnimationFrame(scrollLogs);
        }

        // 启动滚动
        function startLogScroll() {
            logAnimationId = requestAnimationFrame(scrollLogs);
        }

        // 鼠标悬浮停止
        logContent.addEventListener('mouseenter', () => {
            cancelAnimationFrame(logAnimationId);
        });

        // 鼠标离开重启
        logContent.addEventListener('mouseleave', () => {
            cancelAnimationFrame(logAnimationId);
            startLogScroll();
        });
        // ======================== 日志滚动逻辑修改结束 ========================

        function updateSidebarRandomData() {
            const randomElements = document.querySelectorAll('.sidebar-random');
            randomElements.forEach(el => {
                if (el.dataset.min && el.dataset.max) {
                    const min = Number(el.dataset.min);
                    const max = Number(el.dataset.max);
                    el.textContent = Math.floor(Math.random() * (max - min + 1)) + min;
                } else if (el.dataset.list) {
                    const list = el.dataset.list.split(',');
                    el.textContent = list[Math.floor(Math.random() * list.length)];
                }
            });
        }
        updateSidebarRandomData();
        setInterval(updateSidebarRandomData, 5000);
    </script>
</body>
</html>